<script>
// Q = word, A = translation
// 8 selected items from your Quick Hits set
const quizData = [
    {
        term: "dactylographist",
        answers: [
            "one who records the digits",
            "one who records something involving the digits"
        ]
    },
    {
        term: "dactylography",
        answers: [
            "the recording of the digits",
            "the recording of a digit",
            "the recording of something involving the digits"
        ]
    },
    {
        term: "anconopathogeneticist",
        answers: [
            "one who specializes in the science of the production of diseases of the elbow"
        ]
    },
    {
        term: "acromeloplasty",
        answers: [
            "the surgical repairing of the extremities of the limbs"
        ]
    },
    {
        term: "dactylicodystrophic",
        answers: [
            "pertaining to the defective growth of something pertaining to the digits",
            "p.t. the defective growth of something p.t. the digits"
        ]
    },
    {
        term: "craniostenotology",
        answers: [
            "the study of the narrowing of the skull"
        ]
    },
    {
        term: "otocentetotherapy",
        answers: [
            "treatment by means of the surgical puncturing of the ears"
        ]
    },
    {
        term: "cheirokinetogenic",
        answers: [
            "producing the movement of the hands"
        ]
    }
];

let currentQuestion = 0;
let score = 0;

document.getElementById('total').textContent = quizData.length;

function normalize(str) {
    return str
        .toLowerCase()
        .replace(/^the\s+/,"")
        .replace(/^a\s+/,"")
        .replace(/^an\s+/,"")
        .replace(/\s+/g," ")
        .replace(/[.,;!?]/g,"")
        .trim();
}

function updateProgress() {
    const percent = (currentQuestion / quizData.length) * 100;
    document.getElementById('progress').style.width = percent + '%';
}

function displayQuestion() {
    const questionsDiv = document.getElementById('questions');

    if (currentQuestion >= quizData.length) {
        showResults();
        return;
    }

    const q = quizData[currentQuestion];

    questionsDiv.innerHTML = `
        <div class="question-card">
            <div class="question-number">
                Question ${currentQuestion + 1} of ${quizData.length}
            </div>
            <div class="question-text">
                Translate: <span class="term">${q.term}</span>
            </div>
            <input type="text" class="answer-input" id="answer"
                   placeholder="Type the English translation here..."
                   onkeypress="if(event.key==='Enter') checkAnswer()">
            <div class="button-group">
                <button class="btn btn-primary" onclick="checkAnswer()">Submit Answer</button>
                <button class="btn btn-secondary" onclick="skipQuestion()">Skip</button>
            </div>
            <div id="feedback" class="feedback"></div>
        </div>
    `;

    document.getElementById('answer').focus();
    updateProgress();
}

function checkAnswer() {
    const input = document.getElementById('answer').value;
    const normalizedInput = normalize(input);
    const correctList = quizData[currentQuestion].answers;
    const feedback = document.getElementById('feedback');

    const isCorrect = correctList.some(ans => normalize(ans) === normalizedInput);

    if (isCorrect) {
        score++;
        document.getElementById('score').textContent = score;
        feedback.className = 'feedback correct';
        feedback.textContent = 'âœ“ Correct!';
    } else {
        feedback.className = 'feedback incorrect';
        feedback.textContent = `âœ— One correct answer: ${correctList[0]}`;
    }

    setTimeout(() => {
        currentQuestion++;
        displayQuestion();
    }, 2500);
}

function skipQuestion() {
    currentQuestion++;
    displayQuestion();
}

function showResults() {
    const resultsDiv = document.getElementById('results');
    const percent = Math.round((score / quizData.length) * 100);

    let message = '';
    if (percent >= 90) message = 'Outstanding! ðŸŒŸ';
    else if (percent >= 80) message = 'Excellent work! ðŸŽ‰';
    else if (percent >= 70) message = 'Good job! ðŸ‘';
    else if (percent >= 60) message = 'Keep practicing! ðŸ“š';
    else message = 'Review the material and try again! ðŸ’ª';

    document.getElementById('quizContainer').style.display = 'none';
    resultsDiv.innerHTML = `
        <h2>ðŸŽ‰ Quiz Complete!</h2>
        <div class="final-score">${score}/${quizData.length}</div>
        <div class="percentage">${percent}%</div>
        <div class="message">${message}</div>
        <button class="btn btn-primary" onclick="restartQuiz()">Try Again</button>
    `;
    resultsDiv.classList.add('active');
}

function restartQuiz() {
    currentQuestion = 0;
    score = 0;
    document.getElementById('score').textContent = '0';
    document.getElementById('progress').style.width = '0%';
    document.getElementById('results').classList.remove('active');
    document.getElementById('quizContainer').style.display = 'block';
    displayQuestion();
}

// start
displayQuestion();
</script>
